<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Voces Igualitarias</title>
  <link rel="stylesheet" href="styles/indexStyles.css" />
</head>
<body>
  <header>
    <div class="top-bar">
      <input 
        type="text" 
        class="search-bar" 
        placeholder="Buscar..."
      />
      <h1 class="translatable">
        <span>VOCES</span><br>
        <strong>IGUALITARIAS</strong>
      </h1>
      <nav>
        <a href="#" class="translatable">Noticias</a>
        <a href="#" class="translatable">Log in</a>
      </nav>
    </div>
  </header>

  <div id="language-switcher" style="position: absolute; top: 10px; right: 10px;">
    <button id="lang-btn"
      style="background:black; color:white; padding:8px 16px; border:none; border-radius:10px; cursor:pointer; font-size:14px;">
      üåê Ingl√©s
    </button>
  </div>

  <main>
    <section class="carousel">
      <div class="carousel-slide">
        <button class="arrow">&#10094;</button>
        <div class="carousel-content">
          <img src="https://img.icons8.com/ios/452/gender-equality.png" alt="Igualdad" />
          <div class="carousel-text">
            <p class="date translatable">14/04/22 <span class="tag translatable">ECONOM√çA</span></p>
            <h2 class="translatable">
              Medidas para favorecer la igualdad en las empresas
            </h2>
            <p class="translatable">
              La igualdad en el entorno laboral es un objetivo fundamental en la sociedad contempor√°nea...
            </p>
          </div>
        </div>
        <button class="arrow">&#10095;</button>
      </div>
    </section>

    <section class="categories">
      <h2 class="translatable">CATEGOR√çAS</h2>
      <div class="cards">
        <div class="card">
          <span class="label translatable">Ambiental</span>
          <h3 class="translatable">Mujeres, la fuerza que el Medio Ambiente Necesita</h3>
          <p class="translatable">08/03/19<br>Por: Naciones Unidas</p>
        </div>
        <div class="card">
          <span class="label translatable">Comunitaria</span>
          <h3 class="translatable">Nueva Embajadora de la UNESCO...</h3>
          <p class="translatable">01/10/19<br>Por: Naciones Unidas</p>
        </div>
        <div class="card">
          <span class="label translatable">Pol√≠tica</span>
          <h3 class="translatable">Arranca en M√©xico el Foro Generaci√≥n Igualdad</h3>
          <p class="translatable">29/03/21<br>Por: Naciones Unidas</p>
        </div>
        <div class="card">
          <span class="label translatable">Salud</span>
          <h3 class="translatable">La respuesta de las mujeres l√≠deres ante la pandemia del coronavirus</h3>
          <p class="translatable">08/03/20<br>Por: Naciones Unidas</p>
        </div>
      </div>
    </section>
  </main>

  <footer>
    <p class="translatable">
      ‚ÄúVoces que inspiran, acciones que transforman.‚Äù
    </p>
  </footer>

  <script>
    let currentLanguage = "es";

    async function translateText(textArray, toLanguage = "en") {
      const response = await fetch("translate.php", {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify({ texts: textArray, to: toLanguage })
      });

      const data = await response.json();
      return data.translations;
    }

    document.getElementById("lang-btn").addEventListener("click", async () => {
      const elements = document.querySelectorAll(".translatable");

      const originalTexts = Array.from(elements).map(el => el.textContent.trim());
      const targetLang = currentLanguage === "es" ? "en" : "es";

      try {
        const translatedTexts = await translateText(originalTexts, targetLang);
        elements.forEach((el, i) => {
          el.textContent = translatedTexts[i];
        });

        currentLanguage = targetLang;
        document.getElementById("lang-btn").textContent = currentLanguage === "es" ? "üåê Ingl√©s" : "üåê Espa√±ol";
      } catch (error) {
        console.error("Error al traducir:", error);
      }
    });
  </script>  
</body>
</html>
